<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
 <head>
  <title>Class UniformMeasures</title>
  <style>BODY {
 background: url(page.gif) repeat-y white;
}
#slidemenubar, #slidemenubar2{
 position:absolute;
 left:-144px;
 width:160px;
 top:10px;
 border:0px solid black;
 font:bold 12px Verdana;
 line-height:10px;
}
.margin {
 position: absolute;
 left: 10px;
 width: 130px;
}
BODY, P, H1, H2, H3, A {
 font-family: sans-serif;
}
PRE, CODE {
 font-family: courier, monospace;
}
P {
 text-align: justify;
}
H1     { color: #9B0000; }
H2     { color: #FF9933; }
H3, H4 { color: #881155; }
CODE              { color: #663366; }
.code CODE        { color: #000000; }
SPAN.comment      { color: #B22222; }
SPAN.keyword      { color: #A020F0; }
SPAN.string       { color: #BC8F8F; }
SPAN.functionname { color: #0000FF; }
SPAN.type         { color: #228B22; }
SPAN.variablename { color: #B8860B; }
SPAN.reference    { color: #5F9EA0; }
SPAN.builtin      { color: #DA70D6; }
A:link {
 color: #666666;
}
A:visited {
 color: black;
}
A.pre { font-family: courier, monospace;
 color: #228B22;
}
</style>
 </head>
<body>
<script language="JavaScript1.2">
if (document.all)
document.write('<div id="slidemenubar2" style="left:-144" onMouseover="pull()" onMouseout="draw()">')
</script>
<layer id="slidemenubar" onMouseover="pull()" onMouseout="draw()">
<table border="0" cellpadding="0" cellspacing="0" width="161"><tr><td bgcolor="#009cff" width="144"><a href="index.html">Index</a>
</td><td rowspan="4" valign="top" width="16"><img src="menu.gif" width="16"></td></tr><tr><td bgcolor="#009cff" width="144"><a href="node1.html">Measure</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node2.html">Out</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node3.html">Measure</a>
</td></tr></table></layer>
<script language="JavaScript1.2">
function regenerate(){
window.location.reload()
}
function regenerate2(){
if (document.layers)
setTimeout("window.onresize=regenerate",400)
}
window.onload=regenerate2
if (document.all){
document.write('</div>')
themenu=document.all.slidemenubar2.style
rightboundary=0
leftboundary=-144
}
else{
themenu=document.layers.slidemenubar
rightboundary=144
leftboundary=0
}
function pull(){
if (window.drawit)
clearInterval(drawit)
pullit=setInterval("pullengine()",20)
}
function draw(){
clearInterval(pullit)
drawit=setInterval("drawengine()",50)
}
function pullengine(){
if (document.all&&themenu.pixelLeft<rightboundary)
themenu.pixelLeft+=5
else if(document.layers&&themenu.left<rightboundary)
themenu.left+=5
else if (window.pullit)
clearInterval(pullit)
}
function drawengine(){
if (document.all&&themenu.pixelLeft>leftboundary)
themenu.pixelLeft-=5
else if(document.layers&&themenu.left>leftboundary)
themenu.left-=5
else if (window.drawit)
clearInterval(drawit)
}
</script>

<div style="margin-left:160px"><p align="right" class="margin"><div align="right">inheritance tree</div></p>
<pre>
 Score.temporalElement
           |
           |
           |
    <a class="pre" href="node3.html#entity131">UniformMeasures</a>
</pre>
<hr><p class="margin"><div align="right">class definition</div></p>
<code>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> UniformMeasures is a silent timed element representing a constant meter of a score for the duration of the UniformMeasures. The parameter 'n' represents the number of measures. The parameter 'beatNumber' and 'beatDuration' represent the meter as in Measure. The further measure parameters and features (e.g. 'beats' and 'accents') are accessible by the same methods as in Measure. However, there is a difference between getDuration and getMeasureDuration: the first returns the duration of the whole UniformMeasures while the second the duration of a single measure.<BR>
 The similar class MeasureSeq allows to represent a sequence of measures which differ in beatNumber or beatDuration. However, this makes the constraints for MeasureSeq less efficient then the constraints for UniformMeasures.<BR>
<BR>
 NB: The constraints defined for UniformMeasures required both BeatNr and BeatDuration to be determined.<BR>
<BR>
 See the Measures doc for more info.<BR>
<BR>
</span>
<span class="keyword">class</span> <span class="type">UniformMeasures</span> (Inheritance-free)<br>
&nbsp;&nbsp;&nbsp;<span class="keyword">feat</span>&nbsp;!UniformMeasuresType&nbsp;label
<br>
&nbsp;&nbsp;&nbsp;<span class="keyword">attr</span>&nbsp;beatDuration&nbsp;beatNumber&nbsp;measure&nbsp;n
<br>
<ul><li><span class="functionname">accentSyncopationR</span>(B Start End)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> B=1 <-> an event lasting from Start to End is a syncope at accent level: Start is not on an accent, and Start and End fall between different accents.<BR>
 Note: if both Start or End are outside self then B = 0 (even though the respective event might be a syncope in other uniform measures instances).<BR>
 BUG: B=0 for an event that is a syncope at accent level, but its duration is some multiple of the measure duration.<BR>
<BR>
</span>
</li><li><span class="functionname">beatSyncopationR</span>(B Start End)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> B=1 <-> an event lasting from Start to End is a syncope at beat level: Start is not on a beat, and Start and End fall between different beats.<BR>
 Note: if both Start or End are outside self then B = 0 (even though the respective event might be a syncope in other uniform measures instances).<BR>
<BR>
</span>
</li><li><span class="functionname">getAccentInMeasureAt</span>(I Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> I is the index of the accent at Time (one-based). Accents are only counted within individual measures (the first accent in the 2nd measure is again index 1). If Time is between accents then the index of the accent before Time is returned.<BR>
 If Time is outside the boundaries of self, then I = 0.<BR>
 Method delayed until measure duration is determined (i.e. both beatNumber and beatDuration are determined).<BR>
<BR>
</span>
</li><li><span class="functionname">getAccents</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getAccentsFS</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeatAt</span>(I Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> I is the index of the beat at Time (one-based). Beats are counted across all measures in self. If Time is between beats then the index of the last beat before is returned.<BR>
 If Time is outside the boundaries of self, then I = 0.<BR>
<BR>
</span>
</li><li><span class="functionname">getBeatDuration</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeatDurationParameter</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeatInMeasureAt</span>(I Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> I is the index of the beat at Time (one-based). Beats are only counted within individual measures (the first beat in the 2nd measure is again index 1). If Time is between beats then the index of the beat before Time is returned.<BR>
 Constraint blocks until beatNumber is determined.<BR>
 If Time is outside the boundaries of self, then I = 0.<BR>
<BR>
</span>
</li><li><span class="functionname">getBeatNumber</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeatNumberParameter</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeats</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getBeatsFS</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getInitInfo</span>($&nbsp;...)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getMeasureAt</span>(I Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> I is the index of the measure at Time (one-based). A measure starts at its start time and ends before its end time. For instance, the index for the first measure is 1, starting at Time 0. Measure 2 starts at MeasureDuration. I and Time are FD integers.<BR>
 If Time is outside the boundaries of self, then I = 0.<BR>
<BR>
</span>
</li><li><span class="functionname">getMeasureDuration</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> Returns the duration of a single measure. The duration of the whole UniformMeasures is returned by getDuration.<BR>
<BR>
</span>
</li><li><span class="functionname">getMeasureDurationParameter</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getN</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">getNParameter</span>(X)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"></span>
</li><li><span class="functionname">init</span>(beatDuration:BeatDuration beatNumber:BeatNr n:N&nbsp;...)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> ... Further init arguments: accentIdxDB (see Measure) ...<BR>
 If the args n, beatNumber, or beatDuration are left unset, you must set them later with their respective accessor methods.<BR>
<BR>
</span>
</li><li><span class="functionname">measureSyncopationR</span>(B Start End)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> Same as overlapsBarlineR<BR>
<BR>
</span>
</li><li><span class="functionname">onAccentR</span>(B Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> B=1 <-> Time equals some strong beat in some measure in UniformMeasures. Time is FD int, B is implicitly constrained to 0/1-int.<BR>
<BR>
 NB: Constraint blocks until both beatNumber and beatDuration are determined.<BR>
 NB: method does not take n into account -- to limit truth value B to the actual time span within start and end time of UniformMeasures add necessary constraints outside of this method.<BR>
<BR>
</span>
</li><li><span class="functionname">onBeatDR</span>(B Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> Variant of onBeatR which does domain propagation (which can be very expensive). However, propagation of Time does only happen after B got determined.<BR>
<BR>
</span>
</li><li><span class="functionname">onBeatR</span>(B Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> Variant of onAccentR which does domain propagation (which can be very expensive). However, propagation of Time does only happen after B got determined. <BR>
<BR>
 !!?? constraint suspends and performs OK if it first calls {Browse Time}?<BR>
<BR>
 BUGGY -- see comments in alternative implementation in onAccentR<BR>
 */<BR>
 meth onAccentDR(B Time)<BR>
    AccentDur = {FD.decl}<BR>
    RelTime = {FD.decl}<BR>
 in<BR>
    AccentDur = {FD.minusD {Nth {self getAccents($)} 2} {self getAccents($)}.1}<BR>
    RelTime = {FD.modD Time AccentDur}<BR>
    B = {FD.int 0#1}<BR>
    B =: (RelTime =: 0)<BR>
 end<BR>
/** %% B=1 <-> Time equals some beat of some measure in UniformMeasures. For instance, in case beat note value is halve note, that B=1 means that Time is on a halve-note onset or on a strong quarter-note onset.<BR>
 Time is FD int, B is implicitly constrained to 0/1-int.<BR>
<BR>
 NB: method does not take n into account -- to limit truth value B to the actual time span within start and end time of UniformMeasures add necessary constraints outside of this method.<BR>
<BR>
</span>
</li><li><span class="functionname">onMeasureStartDR</span>(B Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> Variant of onMeasureStartR which does domain propagation (which can be very expensive). However, propagation of Time does only happen after B got determined.<BR>
<BR>
 !!?? constraint suspends and performs OK if it first calls {Browse Time}?<BR>
<BR>
</span>
</li><li><span class="functionname">onMeasureStartR</span>(B Time)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> B=1 <-> Time equals the start time of some measure in UniformMeasures. Time is FD int, B is implicitly constrained to 0/1-int.<BR>
<BR>
 NB: blocks until Time is known to be at least size of start time of self.<BR>
 NB: Constraint blocks until both beatNumber and beatDuration are determined.<BR>
 NB: method does not take n into account -- to limit truth value B to the actual time span within start and end time of UniformMeasures add necessary constraints outside of this method.<BR>
<BR>
</span>
</li><li><span class="functionname">overlapsBarlineR</span>(B Start End)<br>

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> B=1 <-> an event lasting from Start to End is a syncope at measure level: Start and End fall in different measures (either within self or beyond).<BR>
 Note: if both Start and End are outside self then B = 0 (even though the respective event might be a syncope at measure level for other uniform measures instances).<BR>
<BR>
</span>
</li></ul>
<span class="keyword">end</span>
</code>
</div></body>
</html>