<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
 <head>
  <title>HS_Out</title>
  <style>BODY {
 background: url(page.gif) repeat-y white;
}
#slidemenubar, #slidemenubar2{
 position:absolute;
 left:-144px;
 width:160px;
 top:10px;
 border:0px solid black;
 font:bold 12px Verdana;
 line-height:10px;
}
.margin {
 position: absolute;
 left: 10px;
 width: 130px;
}
BODY, P, H1, H2, H3, A {
 font-family: sans-serif;
}
PRE, CODE {
 font-family: courier, monospace;
}
P {
 text-align: justify;
}
H1     { color: #9B0000; }
H2     { color: #FF9933; }
H3, H4 { color: #881155; }
CODE              { color: #663366; }
.code CODE        { color: #000000; }
SPAN.comment      { color: #B22222; }
SPAN.keyword      { color: #A020F0; }
SPAN.string       { color: #BC8F8F; }
SPAN.functionname { color: #0000FF; }
SPAN.type         { color: #228B22; }
SPAN.variablename { color: #B8860B; }
SPAN.reference    { color: #5F9EA0; }
SPAN.builtin      { color: #DA70D6; }
A:link {
 color: #666666;
}
A:visited {
 color: black;
}
A.pre { font-family: courier, monospace;
 color: #228B22;
}
</style>
 </head>
<body>
<script language="JavaScript1.2">
if (document.all)
document.write('<div id="slidemenubar2" style="left:-144" onMouseover="pull()" onMouseout="draw()">')
</script>
<layer id="slidemenubar" onMouseover="pull()" onMouseout="draw()">
<table border="0" cellpadding="0" cellspacing="0" width="161"><tr><td bgcolor="#009cff" width="144"><a href="index.html">Index</a>
</td><td rowspan="18" valign="top" width="16"><img src="menu.gif" width="16"></td></tr><tr><td bgcolor="#009cff" width="144"><a href="node1.html">HarmonisedScore</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node2.html">DB</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node3.html">HS_Score</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node4.html">Rules</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node5.html">DBs</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node6.html">HS_Distro</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node7.html">HS_Out</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node8.html">HS</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node9.html">Schoenberg</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node10.html">Default</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node11.html">Jazz</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node12.html">Partch</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node13.html">Johnston</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node14.html">Harrison</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node15.html">Chalmers</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node16.html">Catler</a>
</td></tr><tr><td bgcolor="#009cff" width="144"><a href="node17.html">ArithmeticalSeriesChords</a>
</td></tr></table></layer>
<script language="JavaScript1.2">
function regenerate(){
window.location.reload()
}
function regenerate2(){
if (document.layers)
setTimeout("window.onresize=regenerate",400)
}
window.onload=regenerate2
if (document.all){
document.write('</div>')
themenu=document.all.slidemenubar2.style
rightboundary=0
leftboundary=-144
}
else{
themenu=document.layers.slidemenubar
rightboundary=144
leftboundary=0
}
function pull(){
if (window.drawit)
clearInterval(drawit)
pullit=setInterval("pullengine()",20)
}
function draw(){
clearInterval(pullit)
drawit=setInterval("drawengine()",50)
}
function pullengine(){
if (document.all&&themenu.pixelLeft<rightboundary)
themenu.pixelLeft+=5
else if(document.layers&&themenu.left<rightboundary)
themenu.left+=5
else if (window.pullit)
clearInterval(pullit)
}
function drawengine(){
if (document.all&&themenu.pixelLeft>leftboundary)
themenu.pixelLeft-=5
else if(document.layers&&themenu.left>leftboundary)
themenu.left-=5
else if (window.drawit)
clearInterval(drawit)
}
</script>

<div style="margin-left:160px"><span class="string">

<table border="0" cellpadding="2" cellspacing="2"><tr bgcolor="#eeeecc">




</tr></table>
<span class="string"> This functor defines output for score objects and concepts introduced by HS, e.g., Lilypond output for chord and scale objects and means to define Lilypond output for different temperaments.<BR>
<BR>
</span>
</span>
<h3>Functor</h3>
<ul>HS_Out ("<span class="string">/Users/t/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/HarmonisedScore/source/Output.oz</span>")<br></ul>
<h3>Import</h3>
<code><ul><li>FS</li><li>Explorer</li><li>GUtils at "<span class="string">x-ozlib://anders/strasheela/source/GeneralUtils.ozf"
</span></li><li>LUtils at "<span class="string">x-ozlib://anders/strasheela/source/ListUtils.ozf"
</span></li><li>Score at "<span class="string">x-ozlib://anders/strasheela/source/ScoreCore.ozf"
</span></li><li>Out at "<span class="string">x-ozlib://anders/strasheela/source/Output.ozf"
</span></li><li><a href="node8.html">HS</a> at "<span class="string">../HarmonisedScore.ozf"
</span></li><li><a href="node3.html">HS_Score</a> at "<span class="string">Score.ozf"
</span></li><li><a href="node2.html">HS_DB</a> at "<span class="string">Database.ozf"
</span></li></ul></code>
<h3>Export</h3>
<code><ul><li>&lt;P/1:<a href="#entity470"><span class="functionname">AddExplorerOut_ChordsToScore</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity471"><span class="functionname">RenderAndShowLilypond</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity476"><span class="functionname">MakeNonChordTone_Markup</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity477"><span class="functionname">MakeAdaptiveJI_Marker</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity478"><span class="functionname">MakeAdaptiveJI2_Marker</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity479"><span class="functionname">MakeChordComment_Markup</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity480"><span class="functionname">MakeChordRatios_Markup</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity481"><span class="functionname">MakeScaleComment_Markup</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity472"><span class="functionname">MakeNoteToLily</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity473"><span class="functionname">MakeSimToLilyChord</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity474"><span class="functionname">MakePcCollectionToLily</span></a>&gt;
</li><li>&lt;P/2:<a href="#entity475"><span class="functionname">Pc2RatioVS</span></a>&gt;
</li></ul></code>
<h3>Define</h3>

<code>
<a name="entity470">
<span class="keyword">proc</span>{<span class="functionname">AddExplorerOut_ChordsToScore</span> Args}<br>
<span class="string"> Creates an Explorer action for outputting a pure sequence of chords. The solution of the script for which this explorer action is used must be a sequential container with chord objects (i.e. without the actual notes). The Explorer output action creates a CSP with expects a chord sequence and returns a homophonic chord progression. The result is transformed into music notation (with Lilypond), sound (with Csound), and Strasheela code (archived score objects).<BR>
<BR>
 Args:<BR>
 outname (default out): name under which this action appears in the Explorer menu; and beginning of resulting file names (which get added the space number in the Explorer and then the current time).<BR>
 renderAndShowLilypond (default HS.out.renderAndShowLilypond): binay procedure for outputting the result to Lilypond with the interface {RenderAndShowLilypond MyScore Args}.<BR>
 prefix (default "declare \nChordSeq \n= {Score.makeScore\n"): VS added at the beginning of the resulting Lilypond file. <BR>
 chordsToScore (default HS.score.chordsToScore): ternary procedure implementing the CSP used internally for creating the notes for the given chords. Interface: {ChordsToScore ChordSpecs Args ?ScoreWithNotes}. <BR>
 Further, all args of chordsToScore are supported.<BR>
 <BR>
<BR>
 IMPORTANT: Args.chordsToScore typically conducts a search which potentially can fail (e.g., if insufficient arguments are provided)!<BR>
<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity471">
<span class="keyword">proc</span>{<span class="functionname">RenderAndShowLilypond</span> MyScore Args}<br>
<span class="string"> HS.out.renderAndShowLilypond is a variant of Out.renderAndShowLilypond that additionally notates chord and scale objects and also supports different temperaments beyond 12 ET.<BR>
<BR>
 Args:<BR>
<BR>
 'pitchUnit': a pitch unit atom for which the Lilypond output is defined.<BR>
 'pcsLilyNames' (default pcs(0:c 1:cis 2:d 3:'dis' 4:e 5:f 6:fis 7:g 8:gis 9:a 10:ais 11:b)): tuple of atomes that assigns to each pitch class of the temperament a Lilypond pitch name. The width of the tuple should correspond to the pitch unit.<BR>
 'upperMarkupMakers' (default [MakeNonChordTone_Markup]): a list of unary functions (markup makers) for creating textual markup placed above the staff over a given score object. Each markup function expects a score object and returns a VS. There exist four cases of score objects for which markup can be applied: note objects in general, note objects in simultaneous containers of notes (notated as a chord in Lilypond), chord objects and scale objects. The definition of each markup function must care for all these cases (e.g., with an if expression test whether the input is a note object and then create some VS or alternatively create the empty VS nil). <BR>
 'lowerMarkupMakers' (default [MakeChordComment_Markup MakeScaleComment_Markup]): same as 'upperMarkupMakers', but for markups placed below the staff.<BR>
 'codeBeforeNoteMakers' (default nil): list of unary functions for creating Lilypond code placed directly before a note. Each function expects a score object and returns a VS. There exist three cases of score objects for which markup can be applied: note objects in general, notes in simultaneous containers of notes (notated as a chord in Lilypond), and Strasheela chord/scale objects (the resulting Lilypond code is placed before the chord/scale root). The definition of each function must care for these cases.<BR>
 'codeBeforePcCollectionMakers' (default nil): list of binary functions for creating Lilypond code placed directly before a Lilypond note that is part of a Lilypond representation of a Strasheela chord/scale pitch class. Each function expects a chord/scale object and a pitch class; it returns a VS.<BR>
<BR>
 In addition, the arguments of Out.renderAndShowLilypond are supported. <BR>
<BR>
 Please note that HS.out.renderAndShowLilypond is defined by providing Out.renderAndShowLilypond the argument Clauses -- additional clauses are still possible, but adding new note/chord clauses will overwrite the support for defined by this procedure.<BR>
<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity476">
<span class="keyword">fun</span>{<span class="functionname">MakeNonChordTone_Markup</span> MyNote}<br>
<span class="string"> [Note markup function] Expects a note and returns a VS. For harmonic tones the VS is " " and for non-harmonic tones "x". For all other score objects nil is returned.<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity477">
<span class="keyword">fun</span>{<span class="functionname">MakeAdaptiveJI_Marker</span> MyNote}<br>
<span class="string"> [Note markup function] Expects a note and returns a VS that prints the adaptive JI pitch offset of this note in cent. For all other score objects nil is returned.<BR>
<BR>
 Note that Lilypond does not necessarily preserve the order marks for multiple parts per staff. <BR>
<BR>
</span>
</code><br>

<code>
<a name="entity478">
<span class="keyword">fun</span>{<span class="functionname">MakeAdaptiveJI2_Marker</span> MyNote}<br>
<span class="string"> [Note markup function] Expects a note and returns a VS that prints the adaptive JI pitch offset of this note and additionally the absolute pitch in cent. For all other score objects nil is returned.<BR>
<BR>
 Note that Lilypond does not necessarily preserve the order marks for multiple parts per staff.<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity479">
<span class="keyword">proc</span>{<span class="functionname">MakeChordComment_Markup</span> MyChord Result}<br>
<span class="string"> [Chord markup function] Expects a chord and returns the chord comment (a VS). For all other score objects nil is returned.<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity480">
<span class="keyword">proc</span>{<span class="functionname">MakeChordRatios_Markup</span> MyChord Result}
</code><br>

<code>
<a name="entity481">
<span class="keyword">proc</span>{<span class="functionname">MakeScaleComment_Markup</span> MyScale Result}<br>
<span class="string"> [Scale markup function] Expects a scale and returns the scale comment (a VS). For all other score objects nil is returned. <BR>
<BR>
</span>
</code><br>

<code>
<a name="entity472">
<span class="keyword">fun</span>{<span class="functionname">MakeNoteToLily</span> Args}
</code><br>

<code>
<a name="entity473">
<span class="keyword">fun</span>{<span class="functionname">MakeSimToLilyChord</span> Args}<br>
<span class="string"> Outputs Sim (for which IsLilyChord must return true) as a Lilypond chord VS. <BR>
<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity474">
<span class="keyword">fun</span>{<span class="functionname">MakePcCollectionToLily</span> Args}<br>
<span class="string"> Creates Lilypond output (VS) for a PC collection (chord or scale). The PC collection's duration and root is notated by a single a note, all pitch classes as grace notes are following.<BR>
<BR>
</span>
</code><br>

<code>
<a name="entity475">
<span class="keyword">fun</span>{<span class="functionname">Pc2RatioVS</span> MyPC}<br>
<span class="string"> Transforms the pitch class MyPC into a ratio VS. Alternative ratio transformations are given (written like 1/2|1/3). If no transformation existists, 'n/a' is output.<BR>
 NOTE: transformation uses the current interval database, so it only works for interval databases defined with rations. Also,  because just intonation interval interpretations for intervals of a temperament are ambiguous the returned ratio may be missleading.. <BR>
<BR>
</span>
</code><br>
<h3>End</h3>
</div></body>
</html>