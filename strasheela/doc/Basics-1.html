
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>First Steps in Oz</title>
    <meta name="generator" content="muse.el">
    <meta http-equiv="Content-Type"
          content="text/html; charset=iso-8859-1">
    
    <link rel="stylesheet" href="style.css" type="text/css" />
  <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://apps.sourceforge.net  /piwik/strasheela/" : "http://apps.sourceforge.net/piwik/strasheela/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    piwik_action_name = '';
    piwik_idsite = 1;
    piwik_url = pkBaseURL + "piwik.php";
    piwik_log(piwik_action_name, piwik_idsite, piwik_url);
    </script>
    <object><noscript><p><img src="http://apps.sourceforge.net/piwik/strasheela/piwik.php?idsite=1" alt="piwik"/></p></noscript></object>
  <!-- End Piwik Tag -->
  </head>
  <body>
<div id="header">
  <ul class="nav">
    <li class="nav1"><a href="index.html">home</a></li>
    <li class="navn"><a href="https://sourceforge.net/projects/strasheela/">download at sourceforge</a></li>
    <!-- <li class="navn"><a href="IndexOfPages.html">site map</a></li> -->
    <li class="navn"><a href="contact.html">contact</a></li>
  </ul>
  <div id="logo">
<a href="http://sourceforge.net/projects/strasheela"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=167225&type=12" width="120" height="30" border="0" alt="Get Strasheela at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
  </div>
  <div id="logo">
  <a href="http://cmr.soc.plymouth.ac.uk/"><img src="http://cmr.soc.plymouth.ac.uk/iccmr_logo_2.jpg" width="125"  width="80" height="30" border="0" alt="ICCMR Logo" /></a>
  </div>
</div>
    <h1>First Steps in Oz</h1>
    <!-- Page published by Emacs Muse begins here -->
<div class="contents">
<dl>
<dt>
<a href="#sec1">About this document</a>
</dt>
<dt>
<a href="#sec2">&mdash; First Steps in Oz</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec3">Introduction</a>
</dt>
<dt>
<a href="#sec4">Conventions</a>
</dt>
<dt>
<a href="#sec5">BACKGROUND</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec6">Hello World and Comments</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec7">Introduction</a>
</dt>
<dt>
<a href="#sec8">Browse</a>
</dt>
<dt>
<a href="#sec9">Show</a>
</dt>
<dt>
<a href="#sec10">Inspect</a>
</dt>
<dt>
<a href="#sec11">Line comment</a>
</dt>
<dt>
<a href="#sec12">Block comment</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec13">Calculator</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec14">Introduction</a>
</dt>
<dt>
<a href="#sec15">Integers (simple)</a>
</dt>
<dt>
<a href="#sec16">Integers (negative)</a>
</dt>
<dt>
<a href="#sec17">Integers (more)</a>
</dt>
<dt>
<a href="#sec18">Floats (simple)</a>
</dt>
<dt>
<a href="#sec19">Floats (converting to ints)</a>
</dt>
<dt>
<a href="#sec20">Floats (more)</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec21">Variables</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec22">Introduction</a>
</dt>
<dt>
<a href="#sec23">Variable declaration</a>
</dt>
<dt>
<a href="#sec24">Variable scope</a>
</dt>
<dt>
<a href="#sec25">A variable can be unbound</a>
</dt>
<dt>
<a href="#sec26">Cells</a>
</dt>
<dt>
<a href="#sec27">BACKGROUND</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec28">If</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec29">Introduction</a>
</dt>
<dt>
<a href="#sec30">if ... else ... end</a>
</dt>
<dt>
<a href="#sec31">if ... end</a>
</dt>
<dt>
<a href="#sec32">if as an expression</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec33">Procedure and Functions</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec34">Introduction</a>
</dt>
<dt>
<a href="#sec35">Usage</a>
</dt>
<dt>
<a href="#sec36">Defining Max: procedure</a>
</dt>
<dt>
<a href="#sec37">Defining Max: function</a>
</dt>
<dt>
<a href="#sec38">Functions are procedures</a>
</dt>
<dt>
<a href="#sec39">Procedures as functions</a>
</dt>
<dt>
<a href="#sec40">Recursion</a>
</dt>
<dt>
<a href="#sec41">BACKGROUND</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec42">Atoms and Names</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec43">Introduction</a>
</dt>
<dt>
<a href="#sec44">Atoms</a>
</dt>
<dt>
<a href="#sec45">Equality</a>
</dt>
<dt>
<a href="#sec46">Names</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec47">Compound Types</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec48">Introduction</a>
</dt>
<dt>
<a href="#sec49">Records (definition)</a>
</dt>
<dt>
<a href="#sec50">Records (integer features)</a>
</dt>
<dt>
<a href="#sec51">Records (nesting)</a>
</dt>
<dt>
<a href="#sec52">Records (accessing fields)</a>
</dt>
<dt>
<a href="#sec53">Atoms are 'empty' records</a>
</dt>
<dt>
<a href="#sec54">Tuples (definition)</a>
</dt>
<dt>
<a href="#sec55">Tuples (as a record)</a>
</dt>
<dt>
<a href="#sec56">Lists (definition)</a>
</dt>
<dt>
<a href="#sec57">Lists (consing)</a>
</dt>
<dt>
<a href="#sec58">Lists (as a record)</a>
</dt>
<dt>
<a href="#sec59">Lists (accessing head and tail)</a>
</dt>
<dt>
<a href="#sec60">Pairs (definition)</a>
</dt>
<dt>
<a href="#sec61">Pairs (as a tuple)</a>
</dt>
<dt>
<a href="#sec62">Strings (definition)</a>
</dt>
<dt>
<a href="#sec63">Strings (showing text)</a>
</dt>
<dt>
<a href="#sec64">Virtual Strings</a>
</dt>
</dl>
</dd>
<dt>
<a href="#sec65">Error messages</a>
</dt>
<dd>
<dl>
<dt>
<a href="#sec66">Introduction</a>
</dt>
<dt>
<a href="#sec67">Parse error</a>
</dt>
<dt>
<a href="#sec68">Static analysis error</a>
</dt>
<dt>
<a href="#sec69">Binding analysis error</a>
</dt>
<dt>
<a href="#sec70">Type error</a>
</dt>
<dt>
<a href="#sec71">Failure</a>
</dt>
</dl>
</dd>
</dl>
</div>


<h2><a name="sec1" id="sec1"></a>
About this document</h2>

<p class="first">This file was automatically generated from the interactive Strasheela tutorial. Some aspects of the text only make sense in the original interactive tutorial application (e.g., buttons indicated to press, and positions specified on the screen), and not in this version of the text.</p>


<h2><a name="sec2" id="sec2"></a>
&mdash; First Steps in Oz</h2>

<h3><a name="sec3" id="sec3"></a>
Introduction</h3>

<p class="first">This interactive tutorial demonstrates the basics of the Oz programming language and Strasheela.  By presenting small code snippets which can be easily executed and edited, we hope to simplify the process of learning about Oz/Strasheela.</p>

<p>Nevertheless, this tutorial is kept brief.  The explanation of Oz focuses on aspects which are particularly important for Strasheela, and even Strasheela concepts are only briefly outlined.  In other words, it is not the intention of this tutorial to replace the extensive documentation already available on Oz, nor my thesis on Strasheela ;-)</p>

<p>This tutorial is organised in small lessons.  After you started the interactive tutorial application, you can select the sections in the list at the top-left corner of this window.  Each section consist of several subsections, accesible via the list in the bottom-left corner.  These lessons are best studied in their order.</p>

<p>(if you are reading the tutorial in your HTML browser, of course there are no lists of lessons and chapters)</p>




<h3><a name="sec4" id="sec4"></a>
Conventions</h3>

<p class="first">We use a few conventions to present information in this tutorial:</p>

<ul>
<li>`command': in the running text, code in the Oz language is formatted
`like this'; remove the `quotes' when writing your own code.</li>
<li>{...}: the {curly braces} denote a procedure in Oz; you should never
remove them when writing your own code.</li>
<li>WARNING: explains a part of the Oz language which is particularly unusual or confusing.</li>
<li>BACKGROUND: these sections give brief explanations of generic
concepts in Computer Science; please see them if the lesson contains
unfamiliar terms.</li>
</ul>




<h3><a name="sec5" id="sec5"></a>
BACKGROUND</h3>

<p class="first">For explanations about general concepts, see:</p>

<ul>
<li>van Roy and Haridi (2004). Concepts, Techniques, and Models of Computer Programming. MIT Press. <a href="http://www.info.ucl.ac.be/~pvr/book.html">http://www.info.ucl.ac.be/~pvr/book.html</a></li>
<li>The Oz documentation: <a href="http://www.mozart-oz.org/documentation/">http://www.mozart-oz.org/documentation/</a></li>
<li>Wikipedia: <a href="http://www.wikipedia.org/">http://www.wikipedia.org/</a></li>
</ul>





<h2><a name="sec6" id="sec6"></a>
Hello World and Comments</h2>

<h3><a name="sec7" id="sec7"></a>
Introduction</h3>

<p class="first">By convention, the first steps in any programming language is to output the text &quot;Hello World!&quot;.  This tutorial obeys that convention.  :)</p>

<p>After you select another subsection in the bottom-left corner, hit the [Run] button to execute the code.  The first three subsections demonstrate alternate ways to output information:</p>

<ul>
<li>Browse: opens a Browse window</li>
<li>Show: outputs text to standard out (i.e. the command-line)</li>
<li>Inspect: opens an Inspect window</li>
</ul>

<p>(the Browse and Inspect windows might be hidden behind this window)</p>


<p>Oz supports line comments and block comments.  Please select each subsection to see how these comments differ.  (Executing these subsections does nothing, of course!)</p>




<h3><a name="sec8" id="sec8"></a>
Browse</h3>

<p class="first">This will open a Browse window.</p>

<p>WARNING: the Browse window may be hidden behind this tutorial window.</p>


<pre class="src">
{Browse <span style="color: #bc8f8f;">'Hello World!'</span>}
</pre>


<h3><a name="sec9" id="sec9"></a>
Show</h3>

<p class="first">Show something on standard out (the command-line where you started
this tutorial).</p>


<pre class="src">
{Show <span style="color: #bc8f8f;">'Hello World!'</span>}
</pre>


<h3><a name="sec10" id="sec10"></a>
Inspect</h3>

<p class="first">The inspector shows sometimes more information than the Browser
(depending on the inspected value).</p>

<p>WARNING: the Inspector window may be hidden behind this tutorial window.</p>


<pre class="src">
{Inspect <span style="color: #bc8f8f;">'Hello World!'</span>}
</pre>


<h3><a name="sec11" id="sec11"></a>
Line comment</h3>

<p class="first">This example will not produce any output.</p>

<pre class="src">
<span style="color: #b22222;">% </span><span style="color: #b22222;">this is a line comment
</span></pre>


<h3><a name="sec12" id="sec12"></a>
Block comment</h3>

<p class="first">This example will not produce any output.</p>

<pre class="src">
<span style="color: #b22222;">/*</span><span style="color: #b22222;">
this is a
block
comment
*/</span>
</pre>



<h2><a name="sec13" id="sec13"></a>
Calculator</h2>

<h3><a name="sec14" id="sec14"></a>
Introduction</h3>

<p class="first">This section executes simple numeric calculations and displays the result.</p>

<p>Try changing the calculation by using different numbers and freely combining the operators +, -, * , ~ (negation), div (integer division), mod (integer modulus) and / (float division).  You may also use parenthesis to indicate precedence.</p>

<p>You can use integers (e.g. 3, 7) and floats (e.g. 1.0, 3.14).  However, you cannot directly mix integers and floats in a calculation (in that case, an error will be printed at the command line).</p>




<h3><a name="sec15" id="sec15"></a>
Integers (simple)</h3>

<p class="first">Simple math</p>

<pre class="src">
{Browse 3<span style="color: #a020f0;">+</span>4}
</pre>


<h3><a name="sec16" id="sec16"></a>
Integers (negative)</h3>

<p class="first">Oz uses `~' to denote a negative number.</p>

<pre class="src">
{Browse <span style="color: #a020f0;">~</span>7 <span style="color: #a020f0;">*</span> 5}
</pre>


<h3><a name="sec17" id="sec17"></a>
Integers (more)</h3>

<p class="first">Parentheses may be used to nest calculations.</p>

<pre class="src">
{Browse (4 <span style="color: #a020f0;">+</span> 2) <span style="color: #a020f0;">div</span> 2}
</pre>


<h3><a name="sec18" id="sec18"></a>
Floats (simple)</h3>

<p class="first">Simple math</p>

<pre class="src">
{Browse 3<span style="color: #a020f0;">.</span>0 <span style="color: #a020f0;">/</span> <span style="color: #a020f0;">~</span>2<span style="color: #a020f0;">.</span>0}
</pre>


<h3><a name="sec19" id="sec19"></a>
Floats (converting to ints)</h3>

<p class="first">A float is converted into the closest integer with the function `FloatToInt'.  If two integers are equally close (ie x.5) it rounds to the closest even integer.  There is also a function `IntToFloat'.</p>


<pre class="src">
{Browse {FloatToInt 3<span style="color: #a020f0;">.</span>5}}
{Browse {IntToFloat 5}}
</pre>


<h3><a name="sec20" id="sec20"></a>
Floats (more)</h3>

<p class="first">There are many other numeric functions available for floats, e.g., Exp, Log, Sin, Cos...</p>


<pre class="src">
{Browse {Sqrt 9<span style="color: #a020f0;">.</span>0}}
</pre>



<h2><a name="sec21" id="sec21"></a>
Variables</h2>

<h3><a name="sec22" id="sec22"></a>
Introduction</h3>

<p class="first">All variables in Oz must start with a capital letter.  Local variables are declared with the keyword `local', and are valid for the relevant scope.</p>

<p>Global variables can be introduced with the keyword `declare'.  However, global variables are intended for testing and are not supported in this tutorial application.</p>

<p>WARNING: Oz variables are single assignment variables.  Variables are initially unbound (free) and they can be bound once.  However, their value never changes!  If you do not have experience with functional or logic programming languages, we highly recommend reading the background section!</p>

<p>Rewritable data storage is also supported by Oz; the simplest form is called Cells.  Other types of stateful data include arrays, directories, and objects, but we shall not cover them in this tutorial.</p>




<h3><a name="sec23" id="sec23"></a>
Variable declaration</h3>

<p class="first">Local variables are declared with `local'.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
   X = 1 <span style="color: #a020f0;">+</span> 1
   Y
<span style="color: #a020f0;">in</span>
   Y = 3
   {Browse X<span style="color: #a020f0;">*</span>Y}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec24" id="sec24"></a>
Variable scope</h3>

<p class="first">`local' statements can be freely nested (like virtually everything in Oz).  Oz supports static or lexical scope (i.e. a variable always refers to its nearest enclosing binding).</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
   X = 3
<span style="color: #a020f0;">in</span>
  <span style="color: #a020f0;">local</span>
    <span style="color: #b22222;">%% </span><span style="color: #b22222;">shadows the outer X
</span>    X = 4
  <span style="color: #a020f0;">in</span>
    {Browse X}
  <span style="color: #a020f0;">end</span>
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">later, browse original X
</span>  {Browse X}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec25" id="sec25"></a>
A variable can be unbound</h3>

<p class="first">Watch the Browser: X is first unbound (_ is displayed).  After 3 seconds (3000 msec), X is bound to 42.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
   X
<span style="color: #a020f0;">in</span>
   {Browse X}
   {Delay 3000}
   X = 42
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec26" id="sec26"></a>
Cells</h3>

<p class="first">Cells provide rewritable memory for values.</p>

<p>WARNING: The syntax for reading and writing to cells is different than the syntax for variables.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  C = {NewCell 0}  <span style="color: #b22222;">% </span><span style="color: #b22222;">create new cell with initial value 0
</span>  V
<span style="color: #a020f0;">in</span>
  {Browse <span style="color: #a020f0;">@</span>C}      <span style="color: #b22222;">% </span><span style="color: #b22222;">browse cell value
</span>  {Delay 2000}
  C <span style="color: #a020f0;">:=</span> 5           <span style="color: #b22222;">% </span><span style="color: #b22222;">change cell value to 5 (stateful operation)
</span>  {Browse <span style="color: #a020f0;">@</span>C}
  V = <span style="color: #a020f0;">@</span>C
  {Browse V}
<span style="color: #a020f0;">end</span>

</pre>


<h3><a name="sec27" id="sec27"></a>
BACKGROUND</h3>

<p class="first">Terms: single assignment variable, bound/determined variable,
unbound/free variable, lexical scope.</p>

<p>In mainstream programming languages, variable values may be read
and written at will.  Actually, a better term for them may be
&quot;mutables&quot;.  This often confuses new programmers, since variables in
math do not operate this way &mdash; once the value of a variable is set,
it stays set.</p>

<p>In Oz, variables operate more like math variables.  Assigning a value
to a variable is called &quot;binding&quot;; once a variable is &quot;bound&quot; (or
&quot;determined&quot;), it cannot be changed.  Variables are &quot;free&quot; (have no
value) by default, and compound variables (such as lists) may be
&quot;partially bound&quot; (ie. some elements may be bound, while others are
unbound). The advantage of single assignment variables is that
programs where variable values never change are more easy to
understand and maintain.</p>

<p>Reading:</p>

<ul>
<li>van Roy and Haridi, Chap. 1-2 (in particular Sec. 1.2, and 2.2)</li>
<li>Oz Tutorial, Chap. 3, introduction</li>
</ul>





<h2><a name="sec28" id="sec28"></a>
If</h2>

<h3><a name="sec29" id="sec29"></a>
Introduction</h3>

<p class="first">Oz provides the usual `if' control structure.  Note that unlike some mainstream programming languages, parenthesis () are not required around the condition, althought they may make the code easier to read.</p>

<p>Please note that the `if' control structure can also be used as an expression which returns a value from the `then' or `else' clause.</p>




<h3><a name="sec30" id="sec30"></a>
if ... else ... end</h3>

<p class="first">Try changing 2 to 6.</p>

<pre class="src">
<span style="color: #a020f0;">if</span> (2 <span style="color: #a020f0;">&lt;</span> 5) <span style="color: #a020f0;">then</span>
    {Browse less}
<span style="color: #a020f0;">else</span>
    {Browse more}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec31" id="sec31"></a>
if ... end</h3>

<p class="first">The `else' clause is optional. This example does nothing, but try changing `==' to `\=.' The operations `==' and `\=' test equality and inequality of values.</p>

<pre class="src">
<span style="color: #a020f0;">if</span> (this <span style="color: #a020f0;">==</span> that) <span style="color: #a020f0;">then</span>
    {Browse hi}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec32" id="sec32"></a>
if as an expression</h3>

<p class="first">This `if' returns a value, which is browsed.</p>

<pre class="src">
{Browse
 <span style="color: #a020f0;">if</span> (2 <span style="color: #a020f0;">&lt;</span> 5) <span style="color: #a020f0;">then</span> less <span style="color: #a020f0;">else</span> more <span style="color: #a020f0;">end</span>}
</pre>



<h2><a name="sec33" id="sec33"></a>
Procedure and Functions</h2>

<h3><a name="sec34" id="sec34"></a>
Introduction</h3>

<p class="first">Procedures and functions are the standard means for expressing a collection of computations in a single entity.  Examples range from numeric computations to commands involving the operating system.  For example, we have already seen a number of numeric operations expressed by the common infix notation.</p>

<p>WARNING: curly braces {...} must surround a function or a procedure call.  This syntax for procedure/function application is rather unusual when compared with other programming languages, but it is also unambiguous.</p>

<p>In Oz, procedures are the fundamental concept.  Functions are just a syntactic variant of procedures, added for convenience.  The main difference between functions and procedures is that functions are procedures which always returns exactly one value.  Procedures do not necessarily return anything.</p>

<p>More specifically, a function is a procedure whose last argument &mdash; the return value &mdash; is expressed implicitly.  Every function may be called like a procedure by adding this return value explicitly.  In addition, any procedure can also be called as a function which returns its omitted last argument.</p>




<h3><a name="sec35" id="sec35"></a>
Usage</h3>

<p class="first">The procedure `Browse' is called with the result of function `IsEven'.  `IsEven' expects one integer as an argument, and returns true or false.  `Browse' expects one argument (any value), and returns nothing.</p>

<pre class="src">
{Browse
 {IsEven 3}}
</pre>


<h3><a name="sec36" id="sec36"></a>
Defining Max: procedure</h3>

<p class="first">The procedure `Max' gets two numbers as its first two arguments and binds its last argument to the greater number.</p>

<p>WARNING: the variable X in the Max definition and the variable X outside are different variables (cf. variable scope above).</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  X
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">procedure definition
</span>  <span style="color: #a020f0;">proc</span><span style="color: #b8860b;"> </span>{<span style="color: #0000ff;">Max</span> X Y Z}
     <span style="color: #a020f0;">if</span> X <span style="color: #a020f0;">&gt;=</span> Y <span style="color: #a020f0;">then</span> Z = X <span style="color: #a020f0;">else</span> Z = Y <span style="color: #a020f0;">end</span>
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">in</span>
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">procedure application
</span>  {Max 4 3 X}
  {Browse X}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec37" id="sec37"></a>
Defining Max: function</h3>

<p class="first">As mentioned above, a function in Oz is a procedure which returns its last value.  Functions are just &quot;syntactic sugar&quot;, added for programming convenience.</p>

<p>This Max function is equivalent to the Max procedure of the previous section.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  X
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">function definition
</span>  <span style="color: #a020f0;">fun</span><span style="color: #b8860b;"> </span>{<span style="color: #0000ff;">Max</span> X Y}
     <span style="color: #a020f0;">if</span> X <span style="color: #a020f0;">&gt;=</span> Y <span style="color: #a020f0;">then</span> X <span style="color: #a020f0;">else</span> Y <span style="color: #a020f0;">end</span>
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">in</span>
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">function application
</span>  X = {Max 4 3}
  {Browse X}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec38" id="sec38"></a>
Functions are procedures</h3>

<p class="first">Since functions are procedures, we can treat them just like procedures.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  X
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">function definition
</span>  <span style="color: #a020f0;">fun</span><span style="color: #b8860b;"> </span>{<span style="color: #0000ff;">Max</span> X Y}
     <span style="color: #a020f0;">if</span> X <span style="color: #a020f0;">&gt;=</span> Y <span style="color: #a020f0;">then</span> X <span style="color: #a020f0;">else</span> Y <span style="color: #a020f0;">end</span>
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">in</span>
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">function application like a procedure
</span>  {Max 4 3 X}
  {Browse X}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec39" id="sec39"></a>
Procedures as functions</h3>

<p class="first">Remember, every procedure can also be called like a function for convenience.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  X
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">procedure definition
</span>  <span style="color: #a020f0;">proc</span><span style="color: #b8860b;"> </span>{<span style="color: #0000ff;">Max</span> X Y Z}
     <span style="color: #a020f0;">if</span> X <span style="color: #a020f0;">&gt;=</span> Y <span style="color: #a020f0;">then</span> Z = X <span style="color: #a020f0;">else</span> Z = Y <span style="color: #a020f0;">end</span>
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">in</span>
  <span style="color: #b22222;">%% </span><span style="color: #b22222;">procedure application like a function
</span>  X = {Max 4 3}
  {Browse X}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec40" id="sec40"></a>
Recursion</h3>

<p class="first">To understand recursion, you must first understand recursion.  :)</p>

<p>Procedures and functions can call themselves (recursion).  The function Factorial implements the mathematical factorial concept.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
   <span style="color: #a020f0;">fun</span><span style="color: #b8860b;"> </span>{<span style="color: #0000ff;">Factorial</span> N}
      <span style="color: #a020f0;">if</span> N<span style="color: #a020f0;">==</span>0
      <span style="color: #a020f0;">then</span> 1
      <span style="color: #a020f0;">else</span> N <span style="color: #a020f0;">*</span> {Factorial N<span style="color: #a020f0;">-</span>1}
      <span style="color: #a020f0;">end</span>
   <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">in</span>
   <span style="color: #b22222;">%% </span><span style="color: #b22222;">10! = 3628800
</span>   {Browse
    {Factorial 10}}
<span style="color: #a020f0;">end</span>
</pre>


<h3><a name="sec41" id="sec41"></a>
BACKGROUND</h3>

<p class="first">Terms: procedure, function.</p>

<p>Procedure and function definitions wrap up (abstract) some
computation: a complex computation can then be executed simply by
calling the procedure/function.</p>

<p>Functions are often convenient to define and use, because we are often
interested in the result of a computation.  The more general concept
of procedures, on the other hand, is important when we need explicit
access to all arguments (e.g., in constraint definitions), or when a
computation does not return a value (as is the case for many graphical
user interfaces, e.g., the browser).  Also, procedures are more
suitable for concurrent programming, where we cannot return values
to a concurrent computation running in a different thread.  Constraint
programming and concurrent programming are discussed later.</p>




<h2><a name="sec42" id="sec42"></a>
Atoms and Names</h2>

<h3><a name="sec43" id="sec43"></a>
Introduction</h3>

<p class="first">Oz provides a number of basic data types which have a specific textual representation in source code.  We have already seen numbers (i.e. integers and floats).  Here we shall discuss two other data types: Atoms and Names.</p>

<p>Atom:
The safest way to create an atom is to surround it in single quotes: 'hi there'.  Atoms may also be written as text (without spaces) as long as they do not start with a capital letter (those are variables) and the text is not an Oz keyword.  For simplicity, we recommend using 'single quotes'.  ;)</p>

<p>Name:
There are a few things which look like atoms, but are a different variable type: Name.  The Boolean values true and false are both names (specifically, the Bool subtype).  Another often used value which looks like an atom is unit (also a name).</p>




<h3><a name="sec44" id="sec44"></a>
Atoms</h3>

<p class="first">Several atoms are inspected below.</p>

<p>WARNING: Remember that the inspector window might open behind the tutorial.</p>

<pre class="src">
{Inspect <span style="color: #bc8f8f;">'I am an atom'</span>}
{Inspect iAmAnAtom}
{Inspect <span style="color: #bc8f8f;">'iAmAnAtom'</span>}
{Inspect test}
{Inspect nil}
<span style="color: #b22222;">%% </span><span style="color: #b22222;">if is an Oz keyword, but 'if' is an atom
</span>{Inspect <span style="color: #bc8f8f;">'if'</span>}
{Inspect <span style="color: #bc8f8f;">'=='</span>}
</pre>


<h3><a name="sec45" id="sec45"></a>
Equality</h3>

<p class="first">Atoms are the same, whether entered with 'quotes' or not.</p>

<pre class="src">
{Inspect test <span style="color: #a020f0;">==</span> <span style="color: #bc8f8f;">'test'</span>}
</pre>


<h3><a name="sec46" id="sec46"></a>
Names</h3>

<p class="first">The values `true', `false' and `unit' are values which are similar to atoms, but which play a special role (note that the quotes don't belong to the values here).</p>

<p>Obviously, `true' and `false' are the common Boolean values.  Oz provides the value `unit' for the computer science concept of the unit type (a value which is intended to express no further information).  `unit' is often used wherever a token is needed whose value is not important.</p>


<pre class="src">
{Inspect <span style="color: #a020f0;">true</span>}
{Inspect <span style="color: #a020f0;">false</span>}
{Inspect <span style="color: #a020f0;">unit</span>}

<span style="color: #b22222;">%% </span><span style="color: #b22222;">The Inspector shows atoms and names in different colors
</span>{Inspect <span style="color: #bc8f8f;">'I am an atom'</span>}
</pre>



<h2><a name="sec47" id="sec47"></a>
Compound Types</h2>

<h3><a name="sec48" id="sec48"></a>
Introduction</h3>

<p class="first">Besides the atomic types discussed before, Oz also provides compound data types: records, tuples, lists, and strings.</p>

<p>Internally, all of these data types are actually records, just like all functions are actually procedures.  Tuples, lists, and strings just provide a different syntax for interacting with records.</p>



<h3><a name="sec49" id="sec49"></a>
Records (definition)</h3>

<p class="first">A record has a label and consists of feature-value pairs.</p>

<pre class="src">
{Inspect label(feature1:value1 feature2:value2)}
</pre>


<h3><a name="sec50" id="sec50"></a>
Records (integer features)</h3>

<p class="first">Integer features need not be listed explicitly; these two examples are identical.  Note that the `foo' label does not count towards these integer features, and that the integer features are placed before non-integer features.</p>

<pre class="src">
{Inspect test(1:one 2:two foo:bar 3:three)}
{Inspect test(one two foo:bar three)}
</pre>


<h3><a name="sec51" id="sec51"></a>
Records (nesting)</h3>

<p class="first">Records can be freely nested.</p>

<pre class="src">
{Inspect test(1:hi 2:there x:<span style="color: #a020f0;">unit</span>(foo:bar))}
</pre>


<h3><a name="sec52" id="sec52"></a>
Records (accessing fields)</h3>

<p class="first">Record fields are accessed with the dot operator.  R.X returns the value stored at feature X in record R.  Records support constant-time access (i.e. the time the access takes is independent of the feature position).</p>

<pre class="src">
{Inspect test(x:hi y:there)<span style="color: #a020f0;">.</span>x}
</pre>


<h3><a name="sec53" id="sec53"></a>
Atoms are 'empty' records</h3>

<p class="first">An atom is a record which only consists in its label, but which has no features.</p>

<pre class="src">
{Inspect test() <span style="color: #a020f0;">==</span> test}
{Inspect {IsRecord test}}
</pre>


<h3><a name="sec54" id="sec54"></a>
Tuples (definition)</h3>

<p class="first">A tuple consists of a label and values.</p>

<pre class="src">
{Inspect label(value1 value2 value3)}
</pre>


<h3><a name="sec55" id="sec55"></a>
Tuples (as a record)</h3>

<p class="first">Actually, a tuple is a record which has only integer features in ascending order.  These features can be omitted.  The two records below are equivalent.</p>

<pre class="src">
{Inspect <span style="color: #a020f0;">unit</span>(1:a 2:b 3:c) <span style="color: #a020f0;">==</span> <span style="color: #a020f0;">unit</span>(a b c)}
</pre>


<h3><a name="sec56" id="sec56"></a>
Lists (definition)</h3>

<p class="first">A list is a sequence of values, ending with `nil'.</p>

<pre class="src">
{Inspect [value1 value2 value3]}
</pre>


<h3><a name="sec57" id="sec57"></a>
Lists (consing)</h3>

<p class="first">A list can also be written using the cons operator (|).  `nil' is the empty list, which terminates a list.</p>

<pre class="src">
{Inspect [a b c] <span style="color: #a020f0;">==</span> a<span style="color: #a020f0;">|</span>b<span style="color: #a020f0;">|</span>c<span style="color: #a020f0;">|</span>nil}
</pre>


<h3><a name="sec58" id="sec58"></a>
Lists (as a record)</h3>

<p class="first">Actually, a list is a nested record with the labels '|'.</p>

<pre class="src">
{Inspect [a b c] <span style="color: #a020f0;">==</span> <span style="color: #bc8f8f;">'|'</span>(a <span style="color: #bc8f8f;">'|'</span>(b <span style="color: #bc8f8f;">'|'</span>(c nil)))}
</pre>


<h3><a name="sec59" id="sec59"></a>
Lists (accessing head and tail)</h3>

<p class="first">Consequently, the first element of a list can be accessed under the feature 1, and the remaining list under the feature 2.</p>

<pre class="src">
{Inspect [a b c]<span style="color: #a020f0;">.</span>1}
{Inspect [a b c]<span style="color: #a020f0;">.</span>2}
</pre>


<h3><a name="sec60" id="sec60"></a>
Pairs (definition)</h3>

<p class="first">A pair is a convenient way of concatenating values.</p>

<pre class="src">
{Inspect value1 <span style="color: #a020f0;">#</span> value2 <span style="color: #a020f0;">#</span> value3}
</pre>


<h3><a name="sec61" id="sec61"></a>
Pairs (as a tuple)</h3>

<p class="first">Actually, a pair is a tuple with the label '#'.</p>

<pre class="src">
{Inspect a<span style="color: #a020f0;">#</span>b<span style="color: #a020f0;">#</span>c  <span style="color: #a020f0;">==</span> <span style="color: #bc8f8f;">'#'</span>(a b c)}
</pre>


<h3><a name="sec62" id="sec62"></a>
Strings (definition)</h3>

<p class="first">A string is a list of integers denoting characters (i.e. all list procedures can be used for strings).</p>

<pre class="src">
{Inspect <span style="color: #bc8f8f;">"test"</span> <span style="color: #a020f0;">==</span> [116 101 115 116]}
</pre>


<h3><a name="sec63" id="sec63"></a>
Strings (showing text)</h3>

<p class="first">Although a string is just a list of integers, you can show strings as text in the Browser and the Inspector.  However, you need to configure them for showing strings first.  In the Inspector Preference settings (Options menu), select the tab Appearance and tick &quot;Show Strings&quot;.  You need to do these settings before you inspect a string. Alternatively, you select your string with the mouse, and then in the menu Selection you click &quot;Reinspect&quot;.  The Inspector and Browser do not show strings by default, because a string is just a list of integers, and you may use integer lists which are not strings.</p>

<pre class="src">
{Inspect <span style="color: #bc8f8f;">"This is a string!"</span>}
</pre>


<h3><a name="sec64" id="sec64"></a>
Virtual Strings</h3>

<p class="first">A virtual string (VS) is concatenation (pair) of strings, atoms, and numbers.  Many procedures expecting strings as arguments can also handle virtual strings for convenience.  In this example, the virtual string VS consists of an atom, a string and an integer. The Browser supports showing virtual strings as text, but it must be configured first (menu Options -&gt; Representation...: tick Virtual Strings, then select the virtual string and rebrowse).</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
  VS = <span style="color: #bc8f8f;">'my test'</span><span style="color: #a020f0;">#</span><span style="color: #bc8f8f;">"_"</span><span style="color: #a020f0;">#</span>3
<span style="color: #a020f0;">in</span>
  {Browse VS}
<span style="color: #a020f0;">end</span>
</pre>



<h2><a name="sec65" id="sec65"></a>
Error messages</h2>

<h3><a name="sec66" id="sec66"></a>
Introduction</h3>

<p class="first">When we program, we almost inevitably write bugs.  Luckily, when confronted with specific problems in programs, compilers try to tell us about the problem (naturally, the real hard bugs are the ones no compiler complains about).  All errors are actually raised exceptions (see the Tutorial of Oz, Sec. 5.10 for more details).</p>

<p>The compiler is your friend, so this section introduces you to some typical Oz error messages.  During your programming sessions, carefully reading error messages can save you much time.  In this tutorial, all these messages are shown at the shell (or in the DOS box) where you started the tutorial.  The Oz Programming Interface (OPI) even supports moving to the code where the bug is likely to be located (see the Tutorial of Oz, Sec. 2.3.3).</p>

<p>WARNING: the error messages of this tutorial are slightly obscured unfortunately by some trick which keeps the tutorial application running even in the case of an error: there are always a few lines of other code before the actual error message.  Also, the reported line number is not correct, because the tutorial application adds a few lines to each section (the resulting full section is shown just before the error message).</p>




<h3><a name="sec67" id="sec67"></a>
Parse error</h3>

<p class="first">The left curly brace does not match the right parenthesis.</p>

<pre class="src">
{Browse hello)
</pre>


<h3><a name="sec68" id="sec68"></a>
Static analysis error</h3>

<p class="first">Browse expects only a single argument.</p>

<pre class="src">
{Browse hi there}
</pre>


<h3><a name="sec69" id="sec69"></a>
Binding analysis error</h3>

<p class="first">Variable X is not declared .</p>

<pre class="src">
X = 3
</pre>


<h3><a name="sec70" id="sec70"></a>
Type error</h3>

<p class="first">We cannot add an integer and a float.</p>

<pre class="src">
{Browse 3 <span style="color: #a020f0;">+</span> 2<span style="color: #a020f0;">.</span>0}
</pre>


<h3><a name="sec71" id="sec71"></a>
Failure</h3>

<p class="first">Inconsistent constraint programs result in a failure.  Failures play an important role internally in a constraint solver searching for solutions to a constraint satisfaction problem.</p>

<pre class="src">
<span style="color: #a020f0;">local</span>
   X = 3
<span style="color: #a020f0;">in</span>
   3 <span style="color: #a020f0;">+</span> 4 <span style="color: #a020f0;">=:</span> X
<span style="color: #a020f0;">end</span>
</pre>




<!-- Page published by Emacs Muse ends here -->
<!-- Footer -->
<div id="footer">
<div id="author">&copy; 
Torsten Anders and Graham Percival</div>
<div id="date">Last time edited: 2009.08.29</div>
</div>
  </body>
</html>
